<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="../../static/libs/element_ui/2.12.0/index.css">
    <link rel="stylesheet" href="../../static/libs/iview/3.2.1/css/iview.css">
    <style type="text/css">
        [v-cloak] {
            display: none !important;
        }
        *{margin:0;padding:0;}
        body { margin:0; padding:0; font-family:"微软雅黑"; }
        img{border:0;}
        a { text-decoration: none; color:#fce2ae;}
        a:hover { color:#F30; text-decoration:underline;}
        h1 { background:#ccc; margin:0; padding:20px; }
        h2 { margin:0; padding:20px 0; }
        .intro{padding:20px;  line-height:24px;}
        .demo { padding:20px; border-bottom:#ccc solid 1px;}
        #footer{margin:15px auto; line-height:24px; text-align:center;color:#999; font-size:12px;padding:12px;}
        
        #lottery{width:654px;height:654px;background:#a0cc78;border:1px solid #4A558B;}
        #lottery li{ float:left; width:120px; height:120px; margin:5px; display:inline;}

.shaky {
    display: inline-block;
    padding: 1px;
    /* font-size: 12px; */
    -webkit-transform-origin: center center;
    -ms-transform-origin: center center;
    transform-origin: center center;
    -webkit-animation-name: shaky-slow;
    -ms-animation-name: shaky-slow;
    animation-name: shaky-slow;
    -webkit-animation-duration: 1.5s;
    -ms-animation-duration: 1.5s;
    animation-duration: 1.5s;
    -webkit-animation-iteration-count: infinite;
    -ms-animation-iteration-count: infinite;
    /* animation-iteration-count: infinite; */
    animation-iteration-count: 1; /* 1次 */
    -webkit-animation-timing-function: 1s;
    -ms-animation-timing-function:1s;
    animation-timing-function: 1s;
    -webkit-animation-delay: 0s;
    -ms-animation-delay: 0s;
    animation-delay: 0s;
    -webkit-animation-play-state: running;
    -ms-animation-play-state: running;
    animation-play-state: running;
}
@-webkit-keyframes shaky-slow {
    0% {
        -webkit-transform: translate(0px, 0px) rotate(0deg);
    }
    10% {
        -webkit-transform: translate(0px, -2px) rotate(0deg);
    }
    15% {
        -webkit-transform: translate(-4px, -2px) rotate(0deg);
    }
    20% {
        -webkit-transform: translate(0px, 2px) rotate(0deg);
    }
    30% {
        -webkit-transform: translate(0px, -2px) rotate(0deg);
    }
    40% {
        -webkit-transform: translate(0px, 2px) rotate(0deg);
    }
    45% {
        -webkit-transform: translate(24px, 2px) rotate(0deg);
    }
    50% {
        -webkit-transform: translate(0px, 0px) rotate(0deg);
    }
    85% {
        font-size: 50px
    }
    95% {
        font-size: 80px
    }
}
@keyframes shaky-slow {
    0% {
        transform: translate(0px, 0px) rotate(0deg);
    }
    10% {
        transform: translate(0px, 2px) rotate(0deg);
    }
    15% {
        transform: translate(4px, 2px) rotate(0deg);
    }
    20% {
        transform: translate(0px, -2px) rotate(0deg);
    }
    30% {
        transform: translate(0px, 2px) rotate(0deg);
    }
    40% {
        transform: translate(0px, -2px) rotate(0deg);
    }
    45% {
        transform: translate(-4px, -2px) rotate(0deg);
    }
    50% {
        transform: translate(0px, 0px) rotate(0deg);
    }
    85% {
        font-size: 50px
    }
    95% {
        font-size: 80px
    }
}

    </style>
    <title>抽奖</title>
</head>
{-raw-}
<body style="padding:30px;">
  <div id="app" v-cloak>
      
    <div style="float:left;width:654px;height:654px;margin-left:40px;">
        <ul id="lottery">
            <li :id="'lottery_'+i" v-for="item,i in emp_all">
                <div v-if="!item.no" style="margin-top: 5px">
                        <a href="javascript:void(0);" @click="start_lottery()">
                            <img src="../static/images/j_but.jpg" width="100" height="90" alt="开始抽奖" /></a>
                </div>
                <div v-else style="color:#b6ffea;font-size: 28px;background-color: #226b80;
                text-align:center;line-height: 120px;">
                        <!-- <img :src="'../../static/images/j_'+(Number(i)+1)+'.jpg'" width="100" height="90" alt="悟空公仔" /> -->
                        {{item.name}}
                </div>
            </li>
        </ul>
    </div>
    <div style="float:left;width:654px;height:654px;margin-left:40px;">
        <div style="width:530px;margin:0px auto;">
            <el-button @click="get_emp_all();" type="info" :loading="geting" :disabled="flag" round plain>{{geting?'刷新中':'刷新'}}</el-button>
            
            <el-button style="float: right" type="primary"  @click="start_lottery()" :disabled="geting" :loading="flag" round plain>{{flag?'抽奖中':'抽奖'}}</el-button>
            <el-radio-group v-model="radio_model" @change="his_raido_change1" style="float: right;padding: 15px;">
                <el-tooltip class="item" effect="dark" content="最近中签的4人，不会被抽中" placement="top">
                    <el-radio :label="1">专题演讲</el-radio>
                </el-tooltip>
                <!-- <el-tooltip class="item" effect="dark" content="最近中签的4人，不会被抽中" placement="top"> -->
                    <el-radio :label="2">礼品互赠</el-radio>
                <!-- </el-tooltip> -->
                <el-tooltip class="item" effect="dark" content="用于测试，不记录抽签历史" placement="top">
                    <el-radio :label="0">其他</el-radio>
                </el-tooltip>
            </el-radio-group>
      </div>
      <div style="padding: 15px 0;font-size: 28px;width:200px;margin-left: 80px;">
            <el-badge :value="chouqian_his.length" class="item"><span><b>抽签历史</b></span></el-badge>
        <span style="font-size:20px;"><el-button type="text" @click="get_his();"> >>更多</el-button></span>
    </div>

      <div v-if="chouqian_his.length>0" style="overflow-y: auto;max-height:80%;margin-left:80px;">
            <div style="margin:10px 0px 10px 0px;font-size:24px;" v-if="i<4" :style="top4(i+1)" v-for="item,i in chouqian_his">
                <span style="float: left;width:30px;">{{i+1}}</span>
                {{ item.creat_at +' - '+item.emp_name}}
            </div>
        </div>
        <div v-else>
            <h2 style="text-align: center">暂无记录</h2>
        </div>
        <div style="width:100%;height:100px;margin:20px auto;text-align:center">
            <span style="font-size: 60px;color:rgb(211, 129, 7)" :class="{shaky:class_true}">
                {{ message }}
        </span>
    </div>
    </div>
    <el-drawer 
        title=""
        :visible.sync="drawer" id="drawer"
        :direction="direction"
        :before-close="handleClose">
        <div style="text-align: center;font-size:28px;color:inherit;padding-bottom: 15px;;">抽签历史</div>
        <span style="font-size: 16px;display: inline-block;padding: 5px 10px 5px 30px;line-height: 32px;"><b>类型：</b></span>
        <el-radio-group v-model="his_raido" @change="his_raido_change2" style="padding: 5px 0 5px 10px;">
            <el-radio-button :label="1">专题演讲</el-radio-button>
            <el-radio-button :label="2">礼品互赠</el-radio-button>
            <el-radio-button :label="0">全部</el-radio-button>
        </el-radio-group>
        <div v-if="his_chouqian.length>0" style="overflow-y: auto;max-height:660px;">
            
            <div style="margin:10px 0px 10px 40px;font-size:24px;" v-for="item,i in his_chouqian">
                <span style="float: left;margin-right:30px;width:30px;">{{i+1}}</span>
                <el-tag :type="item.type==1?'':'warning'" style="font-size: 16px;">{{ item.remark }}</el-tag>
                {{ item.creat_at +' - '+item.emp_name}}
               
            </div>
        </div>
        <div v-else>
            <h2 style="text-align: center">暂无记录</h2>
        </div>
    </el-drawer>
  </div>
</body>
{-raw-}
</html>
<script src="../../static/libs/iview/3.2.1/js/vue.js"></script>
<script src="../../static/libs/iview/3.2.1/js/iview.min.js"></script>
<script src="../../static/libs/element_ui/2.12.0/index.js"></script>
<script src="../../static/js/jquery.js"></script>
<script src='../../static/libs/axios/axios-0.18.0.min.js'></script>
<script src='../../static/js/action/action.js'></script>